{"version":3,"file":"47379b9d-69e51274516760199132.js","mappings":"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","sources":["webpack://they-work-for-us/./src/templates/votelog-template.js"],"sourcesContent":["import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport { GatsbyImage } from \"gatsby-plugin-image\"\nimport { css } from \"@emotion/react\"\nimport _ from \"lodash\"\nimport ReactMarkdown from \"react-markdown\"\n\nimport ExternalLink from \"../components/externalLink\"\nimport Layout from \"../components/layout\"\nimport Seo from \"../components/seo\"\nimport VoterList from \"../components/voterList\"\nimport Waffle from \"../components/waffle\"\nimport QuantityLegend from \"../components/quantityLegend\"\n\nimport cross from \"../images/icons/votelog/cross.png\"\n\nimport { media } from \"../styles\"\n\nexport const query = graphql`\n  query($slug: String!) {\n    votelogYaml(fields: { slug: { eq: $slug } }) {\n      yamlId\n      title\n      legal_title\n      vote_date(formatString: \"DD.M.YYYY\")\n      description_th\n      reference\n      document {\n        title\n        link\n      }\n      meeting\n      passed\n      approve\n      disprove\n      abstained\n      absent\n      total_voter\n      special\n      total_people\n    }\n    voteRecordIcon: file(\n      relativePath: { eq: \"images/icons/votelog/votelog.png\" }\n    ) {\n      childImageSharp {\n        gatsbyImageData(height: 30, layout: FIXED)\n      }\n    }\n    downloadIcon: file(\n      relativePath: { eq: \"images/icons/download/download.png\" }\n    ) {\n      childImageSharp {\n        gatsbyImageData(height: 20, layout: FIXED)\n      }\n    }\n    allPeopleVoteYaml {\n      nodes {\n        yamlId\n        title\n        name\n        lastname\n        votelog {\n          key\n          value\n        }\n      }\n    }\n    allPeopleYaml {\n      nodes {\n        yamlId\n        fields {\n          slug\n        }\n        is_mp\n        is_senator\n        is_cabinet\n        is_active\n        mp_type\n        mp_list\n        mp_province\n        mp_zone\n        party\n        images {\n          url\n        }\n      }\n    }\n    allPartyYaml {\n      edges {\n        node {\n          fields {\n            slug\n          }\n          name\n          images {\n            url\n          }\n        }\n      }\n    }\n  }\n`\n\nconst cssSection = {\n  borderBottom: \"0.5rem solid black\",\n  paddingTop: \"3rem\",\n  paddingBottom: \"3rem\",\n  h2: {\n    fontSize: \"4.8rem\",\n    textAlign: \"center\",\n  },\n  \".dot\": {\n    margin: \"0 1rem\",\n    height: \"2rem\",\n    width: \"2rem\",\n    display: \"inline-block\",\n    borderRadius: \"50%\",\n  },\n}\n\nconst filterVote = (combined, key, value) =>\n  _.filter(combined, o => {\n    return (\n      _.get(\n        _.find(o.votelog || [], p => p.key === key),\n        \"value\"\n      ) === value\n    )\n  })\n\nconst VotelogPage = ({\n  data: {\n    votelogYaml,\n    voteRecordIcon,\n    downloadIcon,\n    allPeopleVoteYaml,\n    allPeopleYaml,\n    allPartyYaml,\n  },\n}) => {\n  const { passed, total_voter, total_people } = votelogYaml\n\n  let combined = []\n  allPeopleVoteYaml.nodes.forEach(votelog => {\n    const matched = _.find(allPeopleYaml.nodes, [\"yamlId\", votelog.yamlId])\n    combined.push({ ...votelog, ...matched })\n  })\n\n  const approve = filterVote(combined, votelogYaml.yamlId, \"1\")\n  const disprove = filterVote(combined, votelogYaml.yamlId, \"2\")\n  const abstained = filterVote(combined, votelogYaml.yamlId, \"3\")\n  const absent = filterVote(combined, votelogYaml.yamlId, \"4\")\n  const special = filterVote(combined, votelogYaml.yamlId, \"\")\n\n  return (\n    <Layout\n      pageStyles={{\n        background: \"#000\",\n      }}\n    >\n      <Seo title={votelogYaml.title} imageUrl=\"/seo/share/votelog.png\" />\n\n      <div\n        style={{\n          background: \"#fff\",\n          borderRadius: \"10px\",\n          padding: \"3rem\",\n          margin: \"5rem auto\",\n          maxWidth: \"min(calc(100% - 2rem), 920px)\",\n        }}\n      >\n        <section\n          css={{\n            ...cssSection,\n            paddingBottom: \"1rem !important\",\n            span: {\n              fontSize: \"3rem\",\n            },\n          }}\n        >\n          <div className=\"container\">\n            <span>\n              <GatsbyImage\n                image={voteRecordIcon.childImageSharp.gatsbyImageData}\n                alt=\"\"\n                aria-hidden=\"true\"\n                style={{\n                  verticalAlign: \"middle\",\n                  display: \"inline-block\",\n                  marginRight: \"5px\",\n                }}\n              />\n              {votelogYaml.meeting}\n              <span\n                css={css`\n                  float: right;\n                `}\n              >\n                {votelogYaml.vote_date}\n              </span>\n            </span>\n          </div>\n        </section>\n        <section\n          css={{\n            ...cssSection,\n            paddingBottom: \"1rem !important\",\n            span: {\n              fontSize: \"3rem\",\n            },\n          }}\n        >\n          <div\n            className=\"container\"\n            css={css`\n              margin-bottom: 3rem;\n            `}\n          >\n            {\" \"}\n            <h1\n              css={{\n                marginTop: 0,\n              }}\n            >{`${votelogYaml.title}`}</h1>\n            <p\n              css={css`\n                font-size: 2rem;\n              `}\n            >\n              {votelogYaml.legal_title}\n            </p>\n          </div>\n          <div\n            css={{\n              [media(767)]: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n              },\n            }}\n          >\n            <span>\n              สถานะ{\" \"}\n              {passed ? (\n                <span\n                  css={css`\n                    color: var(--cl-vote-yes);\n                  `}\n                >\n                  <span\n                    className=\"dot\"\n                    css={{\n                      backgroundColor: \"var(--cl-vote-yes)\",\n                    }}\n                  ></span>\n                  ผ่าน\n                </span>\n              ) : (\n                <span\n                  css={css`\n                    color: var(--cl-vote-no);\n                  `}\n                >\n                  <span\n                    className=\"dot\"\n                    css={{\n                      backgroundColor: \"var(--cl-vote-no)\",\n                    }}\n                  ></span>\n                  ไม่ผ่าน\n                </span>\n              )}\n            </span>\n\n            <span\n              css={{\n                display: \"block\",\n              }}\n            >\n              ผู้เข้าร่วมประชุม {total_voter} คน\n              <span\n                css={{\n                  color: \"#C5C5C5\",\n                }}\n              >\n                /{total_people.toLocaleString()}\n              </span>{\" \"}\n              คน\n            </span>\n          </div>\n        </section>\n        <section\n          css={{\n            display: \"flex\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n            ...cssSection,\n          }}\n        >\n          <div\n            css={{ display: \"flex\", flexWrap: \"wrap\", marginBottom: \"4rem\" }}\n          >\n            <QuantityLegend\n              text=\"เห็นด้วย\"\n              boxSize={10}\n              quantity={votelogYaml.approve}\n              background=\"var(--cl-vote-yes)\"\n            />\n            <QuantityLegend\n              text=\"ไม่เห็นด้วย\"\n              boxSize={10}\n              quantity={votelogYaml.disprove}\n              background=\"var(--cl-vote-no)\"\n            />\n            <QuantityLegend\n              text=\"งดออกเสียง\"\n              boxSize={10}\n              quantity={votelogYaml.abstained}\n              background=\"var(--cl-vote-abstained)\"\n            />\n            <QuantityLegend\n              text=\"ไม่ลงคะแนน\"\n              boxSize={10}\n              quantity={votelogYaml.absent}\n            />\n            <QuantityLegend\n              text=\"ไม่เข้าประชุม\"\n              boxSize={8}\n              quantity={votelogYaml.special}\n              imgSrc={cross}\n            />\n          </div>\n          <Waffle\n            data={[\n              approve.map(p => ({ node: p })),\n              disprove.map(p => ({ node: p })),\n              abstained.map(p => ({ node: p })),\n              absent.map(p => ({ node: p })),\n              special.map(p => ({ node: p })),\n            ]}\n            colors={[\n              `var(--cl-vote-yes)`,\n              `var(--cl-vote-no)`,\n              `var(--cl-vote-abstained)`,\n              `var(--cl-vote-absent)`,\n              `var(--cl-vote-absent)`,\n            ]}\n            borderColors={[\n              `var(--cl-vote-yes)`,\n              `var(--cl-vote-no)`,\n              `var(--cl-vote-abstained)`,\n              `var(--cl-black)`,\n              `var(--cl-vote-absent)`,\n            ]}\n            crossLast={true}\n            parties={allPartyYaml.edges.map(e => e.node)}\n          />\n        </section>\n        <section\n          css={{\n            ...cssSection,\n            fontSize: \"2rem\",\n          }}\n        >\n          <h1>เนื้อหา</h1>\n          <ReactMarkdown>{votelogYaml.description_th}</ReactMarkdown>\n          <p\n            css={css`\n              font-weight: bold;\n              padding-top: 2em;\n            `}\n          >\n            อ้างอิง\n          </p>\n          <ExternalLink\n            href={votelogYaml.reference}\n            css={css`\n              :hover {\n                color: var(--cl-black);\n              }\n            `}\n          >\n            <p>{votelogYaml.reference}</p>\n          </ExternalLink>\n          <p\n            css={css`\n              font-weight: bold;\n              padding-top: 2em;\n            `}\n          >\n            เอกสารการลงมติ\n          </p>\n          <button\n            css={css`\n              display: flex;\n              flex-flow: row wrap;\n              padding: 0;\n              border: none;\n              background: none;\n              width: 100%;\n              border-radius: 5px;\n              pointer-events: none;\n              &:focus {\n                outline: none;\n              }\n              text-align: left;\n            `}\n            type=\"button\"\n          >\n            {votelogYaml.document\n              .filter(doc => doc.link)\n              .map(doc => (\n                <ExternalLink\n                  key={doc.link}\n                  href={doc.link}\n                  css={css`\n                    color: var(--cl-black);\n                    :hover {\n                      color: var(--cl-black);\n                    }\n                  `}\n                >\n                  <span\n                    css={css`\n                      font-size: 2.4rem;\n                      font-family: var(--ff-title);\n                      line-height: 3rem;\n                      cursor: pointer;\n                      border-radius: 5px;\n                      padding: 1rem 1rem;\n                      margin-right: 1rem;\n                      margin-bottom: 1rem;\n                      display: block;\n                      background-color: var(--cl-pink);\n                      pointer-events: auto;\n                    `}\n                  >\n                    <GatsbyImage\n                      image={downloadIcon.childImageSharp.gatsbyImageData}\n                      alt=\"\"\n                      aria-hidden=\"true\"\n                      css={{ marginRight: \"1rem\", display: \"inline-block\" }}\n                    />\n                    {doc.title || \"เอกสาร\"}\n                  </span>\n                </ExternalLink>\n              ))}\n          </button>\n        </section>\n        <section>\n          <div className=\"container\">\n            <h1>บันทึกคะแนนเสียง</h1>\n            <VoterList data={[approve, disprove, abstained, absent]} />\n          </div>\n        </section>\n      </div>\n    </Layout>\n  )\n}\n\nexport default VotelogPage\n"],"names":["cssSection","borderBottom","paddingTop","paddingBottom","h2","fontSize","textAlign","margin","height","width","display","borderRadius","filterVote","combined","key","value","o","votelog","p","data","votelogYaml","voteRecordIcon","downloadIcon","allPeopleVoteYaml","allPeopleYaml","allPartyYaml","passed","total_voter","total_people","nodes","forEach","matched","yamlId","push","approve","disprove","abstained","absent","special","pageStyles","background","title","imageUrl","style","padding","maxWidth","css","span","className","G","image","childImageSharp","gatsbyImageData","alt","verticalAlign","marginRight","meeting","vote_date","legal_title","media","justifyContent","toLocaleString","alignItems","flexDirection","text","boxSize","quantity","imgSrc","cross","map","node","colors","borderColors","crossLast","parties","edges","e","description_th","href","reference","type","document","filter","doc","link"],"sourceRoot":""}